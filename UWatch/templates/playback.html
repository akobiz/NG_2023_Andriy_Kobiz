{% extends "index.html" %}
{% block meta %}
    <meta property="og:title" content="{{ url }}">
    <meta property="og:description" content="{{ description }}">
    {% set image_path = url_for('static', filename=poster).replace('/playback/' + url, '') %}
    <meta property="og:image" content="{{ image_path }}">
{% endblock %}

{% block content %} 
<div class="video">
    <video autoplay="autoplay" controls="controls" preload="preload" {% if poster %}
     poster="{{ url_for('static', filename=poster)}}" {% endif %} width="750px" height="450px">
        <source src="{{ url_for('static', filename=url) }}" type="video/mp4"></source>
    </video>
    <p>{{ description }}</p>
</div>
<br><br><br>
<div class="comments" style="display: grid; right: inherit;">
    {% if current_user.is_authenticated %}
        <form action="/leaveComment" id="form" method="post">
            <input type="hidden" name="url" id="url" value="{{ url }}">
            <input type="hidden" name="user" id="user" value="{{ current_user.id }}">
            <input type="text" name="comment" id="comment" placeholder="type your comment">
            <button type="submit" name="btn" id="btn">SEND COMMENT</button>
        </form>
    {% else %}
        <a href="/sign">SIGN IN TO LEAVE A COMMENT</a>
    {% endif %}
    <div id="commentContainer">
        {% for comment in comments %}
            {{ comment.user.channel_name }} {{ comment.date }} <br>
            {{ comment.comment }}
            <hr>
        {% endfor %}
    </div>
</div>
{% endblock %}